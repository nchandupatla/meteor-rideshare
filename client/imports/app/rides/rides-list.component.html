<div class="row">
  <div class="col-md-12">
    <div class="jumbotron">
      <h3>Create a new ride!</h3>
      <rides-form [hidden]="!user"></rides-form>
      <div [hidden]="user">You need to login to create new rides!</div>
    </div>
  </div>
</div>
<div class="row ma-filters">
  <div class="col-md-6">
    <h3>All Rides:</h3>
    <form class="form-inline">
      <input type="text" class="form-control" #searchtext placeholder="Search by Location">
      <button type="button" class="btn btn-primary" (click)="search(searchtext.value)">Search</button>
      Sort by name: <select class="form-control" #sort (change)="changeSortOrder(sort.value)">
      <option value="1" selected>Ascending</option>
      <option value="-1">Descending</option>
    </select>
    </form>
  </div>
</div>
<div class="row">
  <div class="col-md-6">
    <ul class="list-group">
      <li class="list-group-item">
        <pagination-controls (pageChange)="onPageChanged($event)"></pagination-controls>
      </li>
      <li *ngFor="let ride of rides | async"
          class="list-group-item ma-ride-item">
        <div class="row">
          <div class="col-sm-8">
            <h2 class="ma-ride-name">
              <a [routerLink]="['/ride', ride._id]">{{ride.location.name}}</a>
            </h2>
            @ {{ride.location.name}} on {{ride.date | date:'medium'}}
            <p class="ma-ride-description">
              {{ride.description}}
            </p>
          </div>
          <div class="col-sm-4">
            <button class="btn btn-danger pull-right" [hidden]="!isOwner(ride)" (click)="removeRide(ride)"><i
              class="fa fa-times"></i></button>
          </div>
        </div>
      </li>
      <li class="list-group-item">
        <pagination-controls (pageChange)="onPageChanged($event)"></pagination-controls>
      </li>
    </ul>
  </div>
  <div class="col-md-6">
    <ul class="list-group">
      <li class="list-group-item">
        <sebm-google-map
          [latitude]="0"
          [longitude]="0"
          [zoom]="1">
          <div *ngFor="let ride of rides | async">
            <sebm-google-map-marker
              *ngIf="ride.location.lat"
              [latitude]="ride.location.lat"
              [longitude]="ride.location.lng">
            </sebm-google-map-marker>
          </div>
        </sebm-google-map>
      </li>
    </ul>
  </div>
</div>